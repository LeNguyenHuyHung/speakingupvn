(function($){Drupal.progressBar=function(id,updateCallback,method,errorCallback){var pb=this;this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$('<div class="progress" aria-live="polite"></div>').attr('id',id);this.element.html('<div class="bar"><div class="filled"></div></div><div class="percentage"></div><div class="message">&nbsp;</div>')};Drupal.progressBar.prototype.setProgress=function(percentage,message){if(percentage>=0&&percentage<=100){$('div.filled',this.element).css('width',percentage+'%');$('div.percentage',this.element).html(percentage+'%')};$('div.message',this.element).html(message);if(this.updateCallback)this.updateCallback(percentage,message,this)};Drupal.progressBar.prototype.startMonitoring=function(uri,delay){this.delay=delay;this.uri=uri;this.sendPing()};Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer);this.uri=null};Drupal.progressBar.prototype.sendPing=function(){if(this.timer)clearTimeout(this.timer);if(this.uri){var pb=this;$.ajax({type:this.method,url:this.uri,data:'',dataType:'json',success:function(progress){if(progress.status==0){pb.displayError(progress.data);return};pb.setProgress(progress.percentage,progress.message);pb.timer=setTimeout(function(){pb.sendPing()},pb.delay)},error:function(xmlhttp){pb.displayError(Drupal.ajaxError(xmlhttp,pb.uri))}})}};Drupal.progressBar.prototype.displayError=function(string){var error=$('<div class="messages error"></div>').html(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this)}})(jQuery);;/*})'"*/
(function($){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.Modal=Drupal.CTools.Modal||{};Drupal.CTools.Modal.show=function(choice){var opts={};if(choice&&typeof choice=='string'&&Drupal.settings[choice]){$.extend(true,opts,Drupal.settings[choice])}else if(choice)$.extend(true,opts,choice);var defaults={modalTheme:'CToolsModalDialog',throbberTheme:'CToolsModalThrobber',animation:'show',animationSpeed:'fast',modalSize:{type:'scale',width:.8,height:.8,addWidth:0,addHeight:0,contentRight:25,contentBottom:45},modalOptions:{opacity:.55,background:'#fff'},modalClass:'default'},settings={};$.extend(true,settings,defaults,Drupal.settings.CToolsModal,opts);if(Drupal.CTools.Modal.currentSettings&&Drupal.CTools.Modal.currentSettings!=settings){Drupal.CTools.Modal.modal.remove();Drupal.CTools.Modal.modal=null};Drupal.CTools.Modal.currentSettings=settings;var resize=function(e){var context=e?document:Drupal.CTools.Modal.modal;if(Drupal.CTools.Modal.currentSettings.modalSize.type=='scale'){var width=$(window).width()*Drupal.CTools.Modal.currentSettings.modalSize.width,height=$(window).height()*Drupal.CTools.Modal.currentSettings.modalSize.height}else{var width=Drupal.CTools.Modal.currentSettings.modalSize.width,height=Drupal.CTools.Modal.currentSettings.modalSize.height};$('div.ctools-modal-content',context).css({width:width+Drupal.CTools.Modal.currentSettings.modalSize.addWidth+'px',height:height+Drupal.CTools.Modal.currentSettings.modalSize.addHeight+'px'});$('div.ctools-modal-content .modal-content',context).css({width:(width-Drupal.CTools.Modal.currentSettings.modalSize.contentRight)+'px',height:(height-Drupal.CTools.Modal.currentSettings.modalSize.contentBottom)+'px'})};if(!Drupal.CTools.Modal.modal){Drupal.CTools.Modal.modal=$(Drupal.theme(settings.modalTheme));if(settings.modalSize.type=='scale')$(window).bind('resize',resize)};resize();$('span.modal-title',Drupal.CTools.Modal.modal).html(Drupal.CTools.Modal.currentSettings.loadingText);Drupal.CTools.Modal.modalContent(Drupal.CTools.Modal.modal,settings.modalOptions,settings.animation,settings.animationSpeed,settings.modalClass);$('#modalContent .modal-content').html(Drupal.theme(settings.throbberTheme)).addClass('ctools-modal-loading');$('#modalContent .modal-content').delegate('input.form-autocomplete','keyup',function(){$('#autocomplete').css('top',$(this).position().top+$(this).outerHeight()+$(this).offsetParent().filter('#modal-content').scrollTop())})};Drupal.CTools.Modal.dismiss=function(){if(Drupal.CTools.Modal.modal)Drupal.CTools.Modal.unmodalContent(Drupal.CTools.Modal.modal)};Drupal.theme.prototype.CToolsModalDialog=function(){var html='';html+='<div id="ctools-modal">';html+='  <div class="ctools-modal-content">';html+='    <div class="modal-header">';html+='      <a class="close" href="#">';html+=Drupal.CTools.Modal.currentSettings.closeText+Drupal.CTools.Modal.currentSettings.closeImage;html+='      </a>';html+='      <span id="modal-title" class="modal-title">&nbsp;</span>';html+='    </div>';html+='    <div id="modal-content" class="modal-content">';html+='    </div>';html+='  </div>';html+='</div>';return html};Drupal.theme.prototype.CToolsModalThrobber=function(){var html='';html+='<div id="modal-throbber">';html+='  <div class="modal-throbber-wrapper">';html+=Drupal.CTools.Modal.currentSettings.throbber;html+='  </div>';html+='</div>';return html};Drupal.CTools.Modal.getSettings=function(object){var match=$(object).attr('class').match(/ctools-modal-(\S+)/);if(match)return match[1]};Drupal.CTools.Modal.clickAjaxCacheLink=function(){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));return Drupal.CTools.AJAX.clickAJAXCacheLink.apply(this)};Drupal.CTools.Modal.clickAjaxLink=function(){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));return false};Drupal.CTools.Modal.submitAjaxForm=function(e){var $form=$(this),url=$form.attr('action');setTimeout(function(){Drupal.CTools.AJAX.ajaxSubmit($form,url)},1);return false};Drupal.behaviors.ZZCToolsModal={attach:function(context){$('area.ctools-use-modal, a.ctools-use-modal',context).once('ctools-use-modal',function(){var $this=$(this);$this.click(Drupal.CTools.Modal.clickAjaxLink);var element_settings={};if($this.attr('href')){element_settings.url=$this.attr('href');element_settings.event='click';element_settings.progress={type:'throbber'}};var base=$this.attr('href');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings)});$('input.ctools-use-modal, button.ctools-use-modal',context).once('ctools-use-modal',function(){var $this=$(this);$this.click(Drupal.CTools.Modal.clickAjaxLink);var button=this,element_settings={};element_settings.url=Drupal.CTools.Modal.findURL(this);if(element_settings.url=='')element_settings.url=$(this).closest('form').attr('action');element_settings.event='click';element_settings.setClick=true;var base=$this.attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings);$('.'+$(button).attr('id')+'-url').change(function(){Drupal.ajax[base].options.url=Drupal.CTools.Modal.findURL(button)})});$('#modal-content form',context).once('ctools-use-modal',function(){var $this=$(this),element_settings={};element_settings.url=$this.attr('action');element_settings.event='submit';element_settings.progress={type:'throbber'};var base=$this.attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings);Drupal.ajax[base].form=$this;$('input[type=submit], button',this).click(function(event){Drupal.ajax[base].element=this;this.form.clk=this;if(Drupal.autocompleteSubmit&&!Drupal.autocompleteSubmit())return false;if(jQuery.fn.jquery.substr(0,3)==='1.4'&&typeof event.bubbles==="undefined"){$(this.form).trigger('submit');return false}})});$('.ctools-close-modal',context).once('ctools-close-modal').click(function(){Drupal.CTools.Modal.dismiss();return false})}};Drupal.CTools.Modal.modal_display=function(ajax,response,status){if($('#modalContent').length==0)Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(ajax.element));$('#modal-title').html(response.title);$('#modal-content').html(response.output).scrollTop(0);var settings=response.settings||ajax.settings||Drupal.settings;Drupal.attachBehaviors($('#modalContent'),settings);if($('#modal-content').hasClass('ctools-modal-loading')){$('#modal-content').removeClass('ctools-modal-loading')}else $('#modal-content :focusable:first').focus()};Drupal.CTools.Modal.modal_dismiss=function(command){Drupal.CTools.Modal.dismiss();$('link.ctools-temporary-css').remove()};Drupal.CTools.Modal.modal_loading=function(command){Drupal.CTools.Modal.modal_display({output:Drupal.theme(Drupal.CTools.Modal.currentSettings.throbberTheme),title:Drupal.CTools.Modal.currentSettings.loadingText})};Drupal.CTools.Modal.findURL=function(item){var url='',url_class='.'+$(item).attr('id')+'-url';$(url_class).each(function(){var $this=$(this);if(url&&$this.val())url+='/';url+=$this.val()});return url};Drupal.CTools.Modal.modalContent=function(content,css,animation,speed,modalClass){if(!animation){animation='show'}else if(animation!='fadeIn'&&animation!='slideDown')animation='show';if(!speed)speed='fast';css=jQuery.extend({position:'absolute',left:'0px',margin:'0px',background:'#000',opacity:'.55'},css);css.filter='alpha(opacity='+(100*css.opacity)+')';content.hide();if($('#modalBackdrop').length)$('#modalBackdrop').remove();if($('#modalContent').length)$('#modalContent').remove();if(self.pageYOffset){var wt=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){var wt=document.documentElement.scrollTop}else if(document.body)var wt=document.body.scrollTop;var docHeight=$(document).height()+50,docWidth=$(document).width(),winHeight=$(window).height(),winWidth=$(window).width();if(docHeight<winHeight)docHeight=winHeight;$('body').append('<div id="modalBackdrop" class="backdrop-'+modalClass+'" style="z-index: 1000; display: none;"></div><div id="modalContent" class="modal-'+modalClass+'" style="z-index: 1001; position: absolute;">'+$(content).html()+'</div>');var getTabbableElements=function(){var tabbableElements=$('#modalContent :tabbable'),radioButtons=tabbableElements.filter('input[type="radio"]');if(radioButtons.length>0){var anySelected={};radioButtons.each(function(){var name=this.name;if(typeof anySelected[name]==='undefined')anySelected[name]=radioButtons.filter('input[name="'+name+'"]:checked').length!==0});var found={};tabbableElements=tabbableElements.filter(function(){var keep=true;if(this.type=='radio')if(anySelected[this.name]){keep=this.checked}else{if(found[this.name])keep=false;found[this.name]=true};return keep})};return tabbableElements.get()};modalEventHandler=function(event){target=null;if(event){target=event.target}else{event=window.event;target=event.srcElement};var parents=$(target).parents().get();for(var i=0;i<parents.length;++i){var position=$(parents[i]).css('position');if(position=='absolute'||position=='fixed')return true};if($(target).is('#modalContent, body')||$(target).filter('*:visible').parents('#modalContent').length){return true}else getTabbableElements()[0].focus();event.preventDefault()};$('body').bind('focus',modalEventHandler);$('body').bind('keypress',modalEventHandler);modalTabTrapHandler=function(evt){if(evt.which!=9)return true;var tabbableElements=getTabbableElements(),firstTabbableElement=tabbableElements[0],lastTabbableElement=tabbableElements[tabbableElements.length-1],singleTabbableElement=firstTabbableElement==lastTabbableElement,node=evt.target;if(node==firstTabbableElement&&evt.shiftKey){if(!singleTabbableElement)lastTabbableElement.focus();return false}else if(node==lastTabbableElement&&!evt.shiftKey){if(!singleTabbableElement)firstTabbableElement.focus();return false}else if($.inArray(node,tabbableElements)==-1){var parents=$(node).parents().get();for(var i=0;i<parents.length;++i){var position=$(parents[i]).css('position');if(position=='absolute'||position=='fixed')return true};if(evt.shiftKey){lastTabbableElement.focus()}else firstTabbableElement.focus()}};$('body').bind('keydown',modalTabTrapHandler);var modalContent=$('#modalContent').css('top','-1000px'),$modalHeader=modalContent.find('.modal-header'),mdcTop=wt+(winHeight/2)-(modalContent.outerHeight()/2),mdcLeft=(winWidth/2)-(modalContent.outerWidth()/2);$('#modalBackdrop').css(css).css('top',0).css('height',docHeight+'px').css('width',docWidth+'px').show();modalContent.css({top:mdcTop+'px',left:mdcLeft+'px'}).hide()[animation](speed);modalContentClose=function(){close();return false};$('.close',$modalHeader).bind('click',modalContentClose);modalEventEscapeCloseHandler=function(event){if(event.keyCode==27){close();return false}};$(document).bind('keydown',modalEventEscapeCloseHandler);var oldFocus=document.activeElement;$('.close',$modalHeader).focus()
function close(){$(window).unbind('resize',modalContentResize);$('body').unbind('focus',modalEventHandler);$('body').unbind('keypress',modalEventHandler);$('body').unbind('keydown',modalTabTrapHandler);$('.close',$modalHeader).unbind('click',modalContentClose);$('body').unbind('keypress',modalEventEscapeCloseHandler);$(document).trigger('CToolsDetachBehaviors',$('#modalContent'));if(animation=='fadeIn')animation='fadeOut';if(animation=='slideDown')animation='slideUp';if(animation=='show')animation='hide';modalContent.hide()[animation](speed);$('#modalContent').remove();$('#modalBackdrop').remove();$(oldFocus).focus()};modalContentResize=function(){$('#modalBackdrop').css('height','').css('width','');if(self.pageYOffset){var wt=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){var wt=document.documentElement.scrollTop}else if(document.body)var wt=document.body.scrollTop;var docHeight=$(document).height(),docWidth=$(document).width(),winHeight=$(window).height(),winWidth=$(window).width();if(docHeight<winHeight)docHeight=winHeight;var modalContent=$('#modalContent'),mdcTop=wt+(winHeight/2)-(modalContent.outerHeight()/2),mdcLeft=(winWidth/2)-(modalContent.outerWidth()/2);$('#modalBackdrop').css('height',docHeight+'px').css('width',docWidth+'px').show();modalContent.css('top',mdcTop+'px').css('left',mdcLeft+'px').show()};$(window).bind('resize',modalContentResize)};Drupal.CTools.Modal.unmodalContent=function(content,animation,speed){if(!animation){var animation='show'}else if((animation!='fadeOut')&&(animation!='slideUp'))animation='show';if(!speed)var speed='fast';$(window).unbind('resize',modalContentResize);$('body').unbind('focus',modalEventHandler);$('body').unbind('keypress',modalEventHandler);$('body').unbind('keydown',modalTabTrapHandler);var $modalContent=$('#modalContent'),$modalHeader=$modalContent.find('.modal-header');$('.close',$modalHeader).unbind('click',modalContentClose);$('body').unbind('keypress',modalEventEscapeCloseHandler);$(document).trigger('CToolsDetachBehaviors',$modalContent);content.each(function(){if(animation=='fade'){$('#modalContent').fadeOut(speed,function(){$('#modalBackdrop').fadeOut(speed,function(){$(this).remove()});$(this).remove()})}else if(animation=='slide'){$('#modalContent').slideUp(speed,function(){$('#modalBackdrop').slideUp(speed,function(){$(this).remove()});$(this).remove()})}else{$('#modalContent').remove();$('#modalBackdrop').remove()}})};$(function(){Drupal.ajax.prototype.commands.modal_display=Drupal.CTools.Modal.modal_display;Drupal.ajax.prototype.commands.modal_dismiss=Drupal.CTools.Modal.modal_dismiss})})(jQuery);;/*})'"*/
Drupal.theme.prototype.ModalFormsPopup=function(){var html='';html+='<div id="ctools-modal" class="popups-box">';html+='  <div class="ctools-modal-content modal-forms-modal-content">';html+='    <div class="popups-container">';html+='      <div class="modal-header popups-title">';html+='        <span id="modal-title" class="modal-title"></span>';html+='        <span class="popups-close close">'+Drupal.CTools.Modal.currentSettings.closeText+'</span>';html+='        <div class="clear-block"></div>';html+='      </div>';html+='      <div class="modal-scroll"><div id="modal-content" class="modal-content popups-body"></div></div>';html+='    </div>';html+='  </div>';html+='</div>';return html};/*})'"*/
(function($){Drupal.Views={};Drupal.behaviors.viewsTabs={attach:function(context){if($.viewsUi&&$.viewsUi.tabs)$('#views-tabset').once('views-processed').viewsTabs({selectedClass:'active'});$('a.views-remove-link').once('views-processed').click(function(event){var id=$(this).attr('id').replace('views-remove-link-','');$('#views-row-'+id).hide();$('#views-removed-'+id).attr('checked',true);event.preventDefault()});$('a.display-remove-link').addClass('display-processed').click(function(){var id=$(this).attr('id').replace('display-remove-link-','');$('#display-row-'+id).hide();$('#display-removed-'+id).attr('checked',true);return false})}};Drupal.Views.parseQueryString=function(query){var args={},pos=query.indexOf('?');if(pos!=-1)query=query.substring(pos+1);var pairs=query.split('&');for(var i in pairs)if(typeof(pairs[i])=='string'){var pair=pairs[i].split('=');if(pair[0]!='q'&&pair[1])args[decodeURIComponent(pair[0].replace(/\+/g,' '))]=decodeURIComponent(pair[1].replace(/\+/g,' '))};return args};Drupal.Views.parseViewArgs=function(href,viewPath){if(Drupal.settings.pathPrefix)var viewPath=Drupal.settings.pathPrefix+viewPath;var returnObj={},path=Drupal.Views.getPath(href);if(viewPath&&path.substring(0,viewPath.length+1)==viewPath+'/'){var args=decodeURIComponent(path.substring(viewPath.length+1,path.length));returnObj.view_args=args;returnObj.view_path=path};return returnObj};Drupal.Views.pathPortion=function(href){var protocol=window.location.protocol;if(href.substring(0,protocol.length)==protocol)href=href.substring(href.indexOf('/',protocol.length+2));return href};Drupal.Views.getPath=function(href){href=Drupal.Views.pathPortion(href);href=href.substring(Drupal.settings.basePath.length,href.length);if(href.substring(0,3)=='?q=')href=href.substring(3,href.length);var chars=['#','?','&'];for(var i in chars)if(href.indexOf(chars[i])>-1)href=href.substr(0,href.indexOf(chars[i]));return href}})(jQuery);;/*})'"*/
(function($){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(){if(Drupal.settings&&Drupal.settings.views&&Drupal.settings.views.ajaxViews)$.each(Drupal.settings.views.ajaxViews,function(i,settings){Drupal.views.instances[i]=new Drupal.views.ajaxView(settings)})};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){var selector='.view-dom-id-'+settings.view_dom_id;this.$view=$(selector);var ajax_path=Drupal.settings.views.ajax_path;if(ajax_path.constructor.toString().indexOf("Array")!=-1)ajax_path=ajax_path[0];var queryString=window.location.search||'';if(queryString!==''){var queryString=queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,'');if(queryString!=='')queryString=((/\?/.test(ajax_path))?'&':'?')+queryString};this.element_settings={url:ajax_path+queryString,submit:settings,setClick:true,event:'click',selector:selector,progress:{type:'throbber'}};this.settings=settings;this.$exposed_form=$('#views-exposed-form-'+settings.view_name.replace(/_/g,'-')+'-'+settings.view_display_id.replace(/_/g,'-'));this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax,this));this.links=[];this.$view.filter(jQuery.proxy(this.filterNestedViews,this)).once(jQuery.proxy(this.attachPagerAjax,this));var self_settings=this.element_settings;self_settings.event='RefreshView';this.refreshViewAjax=new Drupal.ajax(this.selector,this.$view,self_settings)};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var button=$('input[type=submit], button[type=submit], input[type=image]',this.$exposed_form);button=button[0];$(button).click(function(){if(Drupal.autocompleteSubmit)Drupal.autocompleteSubmit()});this.exposedFormAjax=new Drupal.ajax($(button).attr('id'),button,this.element_settings)};Drupal.views.ajaxView.prototype.filterNestedViews=function(){return!this.$view.parents('.view').length};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find('ul.pager > li > a, th.views-field a, .attachment .views-summary a').each(jQuery.proxy(this.attachPagerLinkAjax,this))};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){var $link=$(link),viewData={},href=$link.attr('href');$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));$.extend(viewData,Drupal.Views.parseViewArgs(href,this.settings.view_base_path));this.element_settings.submit=viewData;this.pagerAjax=new Drupal.ajax(false,$link,this.element_settings);this.links.push(this.pagerAjax)};Drupal.ajax.prototype.commands.viewsScrollTop=function(ajax,response,status){var offset=$(response.selector).offset(),scrollTarget=response.selector;while($(scrollTarget).scrollTop()==0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:(offset.top-10)},500)}})(jQuery);;/*})'"*/
(function($){"use strict";Drupal.behaviors.webform=Drupal.behaviors.webform||{};Drupal.behaviors.webform.attach=function(context){Drupal.webform.datepicker(context);if(Drupal.settings.webform&&Drupal.settings.webform.conditionals)Drupal.webform.conditional(context)};Drupal.webform=Drupal.webform||{};Drupal.webform.datepicker=function(context){$('div.webform-datepicker').each(function(){var $webformDatepicker=$(this),$calendar=$webformDatepicker.find('input.webform-calendar');if($calendar.length==0)return;var startDate=$calendar[0].className.replace(/.*webform-calendar-start-(\d{4}-\d{2}-\d{2}).*/,'$1').split('-'),endDate=$calendar[0].className.replace(/.*webform-calendar-end-(\d{4}-\d{2}-\d{2}).*/,'$1').split('-'),firstDay=$calendar[0].className.replace(/.*webform-calendar-day-(\d).*/,'$1');startDate=new Date(startDate[0],startDate[1]-1,startDate[2]);endDate=new Date(endDate[0],endDate[1]-1,endDate[2]);if(startDate>endDate){var laterDate=startDate;startDate=endDate;endDate=laterDate};var startYear=startDate.getFullYear(),endYear=endDate.getFullYear();$calendar.datepicker({dateFormat:'yy-mm-dd',yearRange:startYear+':'+endYear,firstDay:parseInt(firstDay),minDate:startDate,maxDate:endDate,onSelect:function(dateText,inst){var date=dateText.split('-');$webformDatepicker.find('select.year, input.year').val(+date[0]).trigger('change');$webformDatepicker.find('select.month').val(+date[1]).trigger('change');$webformDatepicker.find('select.day').val(+date[2]).trigger('change')},beforeShow:function(input,inst){var year=$webformDatepicker.find('select.year, input.year').val(),month=$webformDatepicker.find('select.month').val(),day=$webformDatepicker.find('select.day').val(),today=new Date();year=year?year:today.getFullYear();month=month?month:today.getMonth()+1;day=day?day:today.getDate();year=(year<startYear||year>endYear)?startYear:year;$(input).val(year+'-'+month+'-'+day)}});$calendar.click(function(event){$(this).focus();event.preventDefault()})})};Drupal.webform.conditional=function(context){$.each(Drupal.settings.webform.conditionals,function(formKey,settings){var $form=$('.'+formKey+':not(.webform-conditional-processed)');$form.each(function(index,currentForm){var $currentForm=$(currentForm);$currentForm.addClass('webform-conditional-processed');$currentForm.bind('change',{settings:settings},Drupal.webform.conditionalCheck);Drupal.webform.doConditions($currentForm,settings)})})};Drupal.webform.conditionalCheck=function(e){var $triggerElement=$(e.target).closest('.webform-component'),$form=$triggerElement.closest('form'),triggerElementKey=$triggerElement.attr('class').match(/webform-component--[^ ]+/)[0],settings=e.data.settings;if(settings.sourceMap[triggerElementKey])Drupal.webform.doConditions($form,settings)};Drupal.webform.doConditions=function($form,settings){var stackPointer,resultStack
function executionStackInitialize(andor){stackPointer=-1;resultStack=[];executionStackPush(andor)}
function executionStackPush(andor){resultStack[++stackPointer]={results:[],andor:andor}}
function executionStackAccumulate(result){resultStack[stackPointer]['results'].push(result)}
function executionStackPop(){var stackFrame=resultStack[stackPointer];stackPointer=Math.max(0,stackPointer-1);var $conditionalResults=stackFrame.results,filteredResults=$.map($conditionalResults,function(val){return val?val:null});return stackFrame.andor==='or'?filteredResults.length>0:filteredResults.length===$conditionalResults.length};$.each(settings.ruleGroups,function(rgid_key,rule_group){var ruleGroup=settings.ruleGroups[rgid_key];executionStackInitialize(ruleGroup.andor);$.each(ruleGroup.rules,function(m,rule){switch(rule.source_type){case'component':var elementKey=rule.source,element=$form.find('.'+elementKey)[0],existingValue=settings.values[elementKey]?settings.values[elementKey]:null;executionStackAccumulate(window.Drupal['webform'][rule.callback](element,existingValue,rule.value));break;case'conditional_start':executionStackPush(rule.andor);break;case'conditional_end':executionStackAccumulate(executionStackPop());break}});var conditionalResult=executionStackPop();$.each(ruleGroup.actions,function(aid,action){var $target=$form.find('.'+action.target),actionResult=action.invert?!conditionalResult:conditionalResult;switch(action.action){case'show':var changed=actionResult!=Drupal.webform.isVisible($target);if(actionResult){$target.find('.webform-conditional-disabled:not(.webform-disabled-flag)').removeClass('webform-conditional-disabled').webformProp('disabled',false);$target.removeClass('webform-conditional-hidden').show();$form.find('.chosen-disabled').prev().trigger('chosen:updated.chosen')}else $target.hide().addClass('webform-conditional-hidden').find(':input').addClass('webform-conditional-disabled webform-disabled-flag').webformProp('disabled',true);if(changed&&$target.is('tr'))Drupal.webform.restripeTable($target.closest('table').first());break;case'require':var $requiredSpan=$target.find('.form-required, .form-optional').first();if(actionResult!=$requiredSpan.hasClass('form-required')){var $targetInputElements=$target.find("input:text,textarea,input[type='email'],select,input:radio,input:file");Drupal.detachBehaviors($requiredSpan);$targetInputElements.webformProp('required',actionResult).toggleClass('required',actionResult);if(actionResult){$requiredSpan.replaceWith('<span class="form-required" title="'+Drupal.t('This field is required.')+'">*</span>')}else $requiredSpan.replaceWith('<span class="form-optional"></span>');Drupal.attachBehaviors($requiredSpan)};break;case'set':var $texts=$target.find("input:text,textarea,input[type='email']"),$selects=$target.find('select,select option,input:radio,input:checkbox'),$markups=$target.filter('.webform-component-markup');if(actionResult){var multiple=$.map(action.argument.split(','),$.trim);$selects.webformVal(multiple).webformProp('disabled',true).addClass('webform-disabled-flag');$texts.val([action.argument]).webformProp('readonly',true).addClass('webform-disabled-flag');$markups.html(action.argument)}else{$selects.not('.webform-disabled-flag').webformProp('disabled',false);$texts.not('.webform-disabled-flag').webformProp('readonly',false);$markups.each(function(){var $this=$(this),original=$this.data('webform-markup');if(original!==undefined)$this.html(original)})};break}})});$form.find('.webform-disabled-flag').removeClass('webform-disabled-flag')};Drupal.webform.stopEvent=function(){return false};Drupal.webform.conditionalOperatorStringEqual=function(element,existingValue,ruleValue){var returnValue=false,currentValue=Drupal.webform.stringValue(element,existingValue);$.each(currentValue,function(n,value){if(value.toLowerCase()===ruleValue.toLowerCase()){returnValue=true;return false}});return returnValue};Drupal.webform.conditionalOperatorStringNotEqual=function(element,existingValue,ruleValue){var found=false,currentValue=Drupal.webform.stringValue(element,existingValue);$.each(currentValue,function(n,value){if(value.toLowerCase()===ruleValue.toLowerCase())found=true});return!found};Drupal.webform.conditionalOperatorStringContains=function(element,existingValue,ruleValue){var returnValue=false,currentValue=Drupal.webform.stringValue(element,existingValue);$.each(currentValue,function(n,value){if(value.toLowerCase().indexOf(ruleValue.toLowerCase())>-1){returnValue=true;return false}});return returnValue};Drupal.webform.conditionalOperatorStringDoesNotContain=function(element,existingValue,ruleValue){var found=false,currentValue=Drupal.webform.stringValue(element,existingValue);$.each(currentValue,function(n,value){if(value.toLowerCase().indexOf(ruleValue.toLowerCase())>-1)found=true});return!found};Drupal.webform.conditionalOperatorStringBeginsWith=function(element,existingValue,ruleValue){var returnValue=false,currentValue=Drupal.webform.stringValue(element,existingValue);$.each(currentValue,function(n,value){if(value.toLowerCase().indexOf(ruleValue.toLowerCase())===0){returnValue=true;return false}});return returnValue};Drupal.webform.conditionalOperatorStringEndsWith=function(element,existingValue,ruleValue){var returnValue=false,currentValue=Drupal.webform.stringValue(element,existingValue);$.each(currentValue,function(n,value){if(value.toLowerCase().lastIndexOf(ruleValue.toLowerCase())===value.length-ruleValue.length){returnValue=true;return false}});return returnValue};Drupal.webform.conditionalOperatorStringEmpty=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue),returnValue=true;$.each(currentValue,function(n,value){if(value!==''){returnValue=false;return false}});return returnValue};Drupal.webform.conditionalOperatorStringNotEmpty=function(element,existingValue,ruleValue){return!Drupal.webform.conditionalOperatorStringEmpty(element,existingValue,ruleValue)};Drupal.webform.conditionalOperatorSelectGreaterThan=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue);return Drupal.webform.compare_select(currentValue[0],ruleValue,element)>0};Drupal.webform.conditionalOperatorSelectGreaterThanEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue),comparison=Drupal.webform.compare_select(currentValue[0],ruleValue,element);return comparison>0||comparison===0};Drupal.webform.conditionalOperatorSelectLessThan=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue);return Drupal.webform.compare_select(currentValue[0],ruleValue,element)<0};Drupal.webform.conditionalOperatorSelectLessThanEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue),comparison=Drupal.webform.compare_select(currentValue[0],ruleValue,element);return comparison<0||comparison===0};Drupal.webform.conditionalOperatorNumericEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue),epsilon=0.000001;return currentValue[0]===''?false:(Math.abs(parseFloat(currentValue[0])-parseFloat(ruleValue))<epsilon)};Drupal.webform.conditionalOperatorNumericNotEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue),epsilon=0.000001;return currentValue[0]===''?true:(Math.abs(parseFloat(currentValue[0])-parseFloat(ruleValue))>=epsilon)};Drupal.webform.conditionalOperatorNumericGreaterThan=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue);return parseFloat(currentValue[0])>parseFloat(ruleValue)};Drupal.webform.conditionalOperatorNumericGreaterThanEqual=function(element,existingValue,ruleValue){return Drupal.webform.conditionalOperatorNumericGreaterThan(element,existingValue,ruleValue)||Drupal.webform.conditionalOperatorNumericEqual(element,existingValue,ruleValue)};Drupal.webform.conditionalOperatorNumericLessThan=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.stringValue(element,existingValue);return parseFloat(currentValue[0])<parseFloat(ruleValue)};Drupal.webform.conditionalOperatorNumericLessThanEqual=function(element,existingValue,ruleValue){return Drupal.webform.conditionalOperatorNumericLessThan(element,existingValue,ruleValue)||Drupal.webform.conditionalOperatorNumericEqual(element,existingValue,ruleValue)};Drupal.webform.conditionalOperatorDateEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.dateValue(element,existingValue);return currentValue===ruleValue};Drupal.webform.conditionalOperatorDateNotEqual=function(element,existingValue,ruleValue){return!Drupal.webform.conditionalOperatorDateEqual(element,existingValue,ruleValue)};Drupal.webform.conditionalOperatorDateBefore=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.dateValue(element,existingValue);return(currentValue!==false)&&currentValue<ruleValue};Drupal.webform.conditionalOperatorDateBeforeEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.dateValue(element,existingValue);return(currentValue!==false)&&(currentValue<ruleValue||currentValue===ruleValue)};Drupal.webform.conditionalOperatorDateAfter=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.dateValue(element,existingValue);return(currentValue!==false)&&currentValue>ruleValue};Drupal.webform.conditionalOperatorDateAfterEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.dateValue(element,existingValue);return(currentValue!==false)&&(currentValue>ruleValue||currentValue===ruleValue)};Drupal.webform.conditionalOperatorTimeEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.timeValue(element,existingValue);return currentValue===ruleValue};Drupal.webform.conditionalOperatorTimeNotEqual=function(element,existingValue,ruleValue){return!Drupal.webform.conditionalOperatorTimeEqual(element,existingValue,ruleValue)};Drupal.webform.conditionalOperatorTimeBefore=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.timeValue(element,existingValue);return(currentValue!==false)&&(currentValue<ruleValue)};Drupal.webform.conditionalOperatorTimeBeforeEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.timeValue(element,existingValue);return(currentValue!==false)&&(currentValue<ruleValue||currentValue===ruleValue)};Drupal.webform.conditionalOperatorTimeAfter=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.timeValue(element,existingValue);return(currentValue!==false)&&(currentValue>ruleValue)};Drupal.webform.conditionalOperatorTimeAfterEqual=function(element,existingValue,ruleValue){var currentValue=Drupal.webform.timeValue(element,existingValue);return(currentValue!==false)&&(currentValue>ruleValue||currentValue===ruleValue)};Drupal.webform.compare_select=function(a,b,element){var optionList=[];$('option,input:radio,input:checkbox',element).each(function(){optionList.push($(this).val())});var a_position=optionList.indexOf(a),b_position=optionList.indexOf(b);return(a_position<0||b_position<0)?null:a_position-b_position};Drupal.webform.isVisible=function($element){return $element.hasClass('webform-component-hidden')?!$element.find('input').first().hasClass('webform-conditional-disabled'):$element.closest('.webform-conditional-hidden').length==0};Drupal.webform.stringValue=function(element,existingValue){var value=[];if(element){var $element=$(element);if(Drupal.webform.isVisible($element)){$element.find('input[type=checkbox]:checked,input[type=radio]:checked').each(function(){value.push(this.value)});if(!value.length){var selectValue=$element.find('select').val();if(selectValue)if($.isArray(selectValue)){value=selectValue}else value.push(selectValue)};if(!value.length)$element.find('input:not([type=checkbox],[type=radio]),textarea').each(function(){value.push(this.value)})}}else switch($.type(existingValue)){case'array':value=existingValue;break;case'string':value.push(existingValue);break};return value};Drupal.webform.dateValue=function(element,existingValue){var value=false;if(element){var $element=$(element);if(Drupal.webform.isVisible($element)){var day=$element.find('[name*=day]').val(),month=$element.find('[name*=month]').val(),year=$element.find('[name*=year]').val();if(month)month--;if(year!==''&&month!==''&&day!=='')value=Date.UTC(year,month,day)/1e3}}else{if($.type(existingValue)==='array'&&existingValue.length)existingValue=existingValue[0];if($.type(existingValue)==='string')existingValue=existingValue.split('-');if(existingValue.length===3)value=Date.UTC(existingValue[0],existingValue[1],existingValue[2])/1e3};return value};Drupal.webform.timeValue=function(element,existingValue){var value=false;if(element){var $element=$(element);if(Drupal.webform.isVisible($element)){var hour=$element.find('[name*=hour]').val(),minute=$element.find('[name*=minute]').val(),ampm=$element.find('[name*=ampm]:checked').val();hour=(hour==='')?hour:parseInt(hour);minute=(minute==='')?minute:parseInt(minute);if(hour!==''){hour=(hour<12&&ampm=='pm')?hour+12:hour;hour=(hour===12&&ampm=='am')?0:hour};if(hour!==''&&minute!=='')value=Date.UTC(1970,0,1,hour,minute)/1e3}}else{if($.type(existingValue)==='array'&&existingValue.length)existingValue=existingValue[0];if($.type(existingValue)==='string')existingValue=existingValue.split(':');if(existingValue.length>=2)value=Date.UTC(1970,0,1,existingValue[0],existingValue[1])/1e3};return value};$.fn.webformProp=$.fn.webformProp||function(name,value){if(value){return $.fn.prop?this.prop(name,true):this.attr(name,true)}else return $.fn.prop?this.prop(name,false):this.removeAttr(name)};$.fn.webformVal=function(values){this.each(function(){var $this=$(this),value=$this.val(),on=$.inArray($this.val(),values)!=-1;if(this.nodeName=='OPTION'){$this.webformProp('selected',on?value:false)}else $this.val(on?[value]:false)});return this};Drupal.webform.restripeTable=function(table){$('> tbody > tr, > tr',table).filter(':visible:odd').filter('.odd').removeClass('odd').addClass('even').end().end().filter(':visible:even').filter('.even').removeClass('even').addClass('odd')}})(jQuery);;/*})'"*/
